<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Name To Avatar</title>
</head>

<body>

    <h2>Name to Avatar Generate</h2>

    <form id="form">

        <div>
            <input type="text" name="name" id="" placeholder="Name">

            <div><br>
                <input name="first_letter" type="number" placeholder="First letter position">
                <input name="second_letter" type="number" placeholder="Second letter position">
            </div>
        </div>
        <br>
        <button type="submit">Submit</button>

    </form>
    <img src="" id="showImg" alt=""> <br>
 
    <script>
        // let button = document.getElementById("handelButton");
        let showImg = document.getElementById("showImg");
        let form = document.getElementById("form");
        let inputs = document.querySelectorAll("input");
        let inputValues = {
            name: "",
            first_letter: null,
            second_letter: null,
        }

        inputs.forEach((item) => {
            item.addEventListener("input", (e) => {
                const { name, value } = e.target;
                if (inputValues.hasOwnProperty(name)) {
                    inputValues[name] = value
                }
            })
        })



        form.addEventListener("submit", (e) => {
            e.preventDefault();
            fetch(`http://localhost:4000/get-avatar`, {
                method: 'post',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(inputValues)
            }).then((res) => res.json())
                .then((data) => {
                    const { avatar } = data;
                    showImg.src = avatar;
                })
            form.reset()
        })
        // button.addEventListener("click", () => {

        //     fetch(`http://localhost:4000/get-avatar`, {
        //         method: 'GET',
        //     }).then((respnse) => {
        //         if (respnse.ok) {
        //             return respnse.json(respnse)
        //         }
        //         throw new Error('Network response was not ok.');
        //     }).then((value) => {
        //         const { avatar } = value;
        //         showImg.src = avatar
        //     })

        // })

    </script>
</body>

</html>